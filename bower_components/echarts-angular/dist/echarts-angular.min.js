/**
 * echarts-angular - angular directive for ECharts
 * @version v1.0.0
 * @author tu.wenpan
 * @link https://github.com/twp0217/echarts-angular#readme
 * @license MIT
 */
angular.module("echarts-angular",[]).directive("echartsAngular",["$window",function(n){return{restrict:"E",template:"<div></div>",scope:{theme:"@",option:"=",onInit:"&",onChange:"&"},link:function(t,e,i){var r={height:i.height||400,width:i.width||"auto"},o=e.children()[0]||e[0],a=function(n){t.chart&&n&&(t.chart.setOption(n),t.onChange()&&t.onChange()(n))};
// 监听.初始化
t.$watch(function(){return t.option},function(n){a(n)}),function(n,e,i){if("undefined"==typeof echarts)return void console.error("ECharts is missing");t.chart=echarts.init(n,e||"default",i),t.onInit()&&t.onInit()(t.chart)}(o,t.theme,r),angular.element(n).bind("resize",function(){t.chart&&t.chart.resize()}),
// 销毁
t.$on("$destroy",function(){t.chart&&(t.chart.dispose(),t.chart=null)})}}}]);